# geo_near() for point and MultiPolygon
# Verify if the query has an (explicit) order-by already, no ordering by distance is performed.

select id,geo_distance(p.info.point,
                         { "type" : "MultiPolygon",
                      "coordinates" : 
                      [ 
                          [
                             [
            [
              77.50614166259766,
              12.966754416691947
            ],
            [
              77.60295867919922,
              12.947348706524428
            ],
            [
              77.61051177978516,
              12.908198108318507
            ],
            [
              77.50511169433594,
              12.888787845039232
            ],
            [
              77.55146026611328,
              12.879416834404825
            ],
            [
              77.59712219238281,
              12.875735270042483
            ],
            [
              77.65617370605469,
              12.901170428290447
            ],
            [
              77.70492553710938,
              12.963743284940753
            ],
            [
              77.67539978027344,
              13.033659039547265
            ],
            [
              77.52056121826172,
              12.999874459369373
            ],
            [
              77.50614166259766,
              12.966754416691947
            ]
          ]                          ],
                          [
                       [
            [
              77.55935668945312,
              13.057740282292977
            ],
            [
              77.52948760986328,
              13.065766841807562
            ],
            [
              77.45155334472656,
              13.048375633247892
            ],
            [
              77.4481201171875,
              13.016600074665284
            ],
            [
              77.43438720703125,
              12.94701411205675
            ],
            [
              77.46047973632811,
              12.962739566261234
            ],
            [
              77.49000549316406,
              12.967758119178917
            ],
            [
              77.50991821289062,
              12.982144076424275
            ],
            [
              77.49378204345703,
              13.004892262383622
            ],
            [
              77.52124786376953,
              13.032655603554861
            ],
            [
              77.55935668945312,
              13.056402497014313
            ],
            [
              77.52777099609375,
              13.002550633604786
            ],
            [
              77.49412536621094,
              13.00355419150191
            ],
            [
              77.55935668945312,
              13.057740282292977
            ]
          ] 
                          ]
                      ]
                    }) as dist
from points p
where geo_near(p.info.point,
                         { "type" : "MultiPolygon",
                      "coordinates" : 
                      [ 
                          [
                             [
            [
              77.50614166259766,
              12.966754416691947
            ],
            [
              77.60295867919922,
              12.947348706524428
            ],
            [
              77.61051177978516,
              12.908198108318507
            ],
            [
              77.50511169433594,
              12.888787845039232
            ],
            [
              77.55146026611328,
              12.879416834404825
            ],
            [
              77.59712219238281,
              12.875735270042483
            ],
            [
              77.65617370605469,
              12.901170428290447
            ],
            [
              77.70492553710938,
              12.963743284940753
            ],
            [
              77.67539978027344,
              13.033659039547265
            ],
            [
              77.52056121826172,
              12.999874459369373
            ],
            [
              77.50614166259766,
              12.966754416691947
            ]
          ]                          ],
                          [
                       [
            [
              77.55935668945312,
              13.057740282292977
            ],
            [
              77.52948760986328,
              13.065766841807562
            ],
            [
              77.45155334472656,
              13.048375633247892
            ],
            [
              77.4481201171875,
              13.016600074665284
            ],
            [
              77.43438720703125,
              12.94701411205675
            ],
            [
              77.46047973632811,
              12.962739566261234
            ],
            [
              77.49000549316406,
              12.967758119178917
            ],
            [
              77.50991821289062,
              12.982144076424275
            ],
            [
              77.49378204345703,
              13.004892262383622
            ],
            [
              77.52124786376953,
              13.032655603554861
            ],
            [
              77.55935668945312,
              13.056402497014313
            ],
            [
              77.52777099609375,
              13.002550633604786
            ],
            [
              77.49412536621094,
              13.00355419150191
            ],
            [
              77.55935668945312,
              13.057740282292977
            ]
          ] 
                          ]
                      ]
                    },
                          300000.098)
order by id