<assembly xmlns="http://maven.apache.org/ASSEMBLY/2.1.1"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.1.1 http://maven.apache.org/xsd/assembly-2.1.1.xsd">
  <id>packaging</id>
  <formats>
    <format>dir</format>
  </formats>
  <baseDirectory>kv-${project.version}</baseDirectory>
  <includeBaseDirectory>true</includeBaseDirectory>
  <moduleSets>
    <moduleSet>
      <useAllReactorProjects>true</useAllReactorProjects>
      <includes>
        <include>com.oracle.nosql:kvmain</include>
      </includes>
      <sources>
        <includeModuleDirectory>false</includeModuleDirectory>
        <fileSets>
          <!-- Copy KV source files -->
          <fileSet>
            <directory>src/main/java</directory>
            <outputDirectory>/src</outputDirectory>
            <excludes>
              <exclude>**/exttab</exclude>
              <exclude>**/exttab/*</exclude>
              <exclude>**/coherence</exclude>
              <exclude>**/coherence/**/*</exclude>
              <exclude>**/GeometryImpl.java</exclude>
              <exclude>**/GeometryUtilsImpl.java</exclude>
            </excludes>
          </fileSet>
          <!-- Copy messages.properties to /doc -->
          <fileSet>
            <directory>src/main/resources</directory>
            <includes>
              <include>messages.properties</include>
            </includes>
            <outputDirectory>/doc</outputDirectory>
          </fileSet>
        </fileSets>
      </sources>
    </moduleSet>
  </moduleSets>
  <dependencySets>
    <!-- Copy dependencies (jars) to /lib -->
    <dependencySet>
      <outputDirectory>/lib</outputDirectory>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <useProjectArtifact>false</useProjectArtifact>
      <unpack>false</unpack>
      <scope>runtime</scope>
    </dependencySet>
  </dependencySets>
  <fileSets>
    <fileSet>
      <directory>resources/doc</directory>
      <outputDirectory>/doc</outputDirectory>
      <filtered>true</filtered>
      <nonFilteredFileExtensions>
        <nonFilteredFileExtension>xls</nonFilteredFileExtension>
      </nonFilteredFileExtensions>
    </fileSet>
    <fileSet>
      <directory>target</directory>
      <outputDirectory>/lib</outputDirectory>
      <includes>
        <include>*.jar</include>
      </includes>
      <excludes>
        <exclude>kvstore-ee.jar</exclude>
      </excludes>
      <filtered>false</filtered>
    </fileSet>
  </fileSets>
  <files>
    <file>
      <source>resources/doc/README.txt</source>
      <outputDirectory>/</outputDirectory>
      <filtered>true</filtered>
    </file>
    <file>
      <source>licenses/LICENSE-CE.txt</source>
      <destName>LICENSE.txt</destName>
      <outputDirectory>/</outputDirectory>
    </file>
    <file>
      <source>licenses/LICENSE-CE.txt</source>
      <destName>LICENSE.txt</destName>
      <outputDirectory>/doc</outputDirectory>
    </file>
    <file>
      <source>licenses/THIRD_PARTY_LICENSES-CE.txt</source>
      <destName>THIRD_PARTY_LICENSES.txt</destName>
      <outputDirectory>/</outputDirectory>
    </file>
    <file>
      <source>licenses/THIRD_PARTY_LICENSES-CE.txt</source>
      <destName>THIRD_PARTY_LICENSES.txt</destName>
      <outputDirectory>/doc</outputDirectory>
    </file>
  </files>
</assembly>
